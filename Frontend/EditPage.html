<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Medicine - MEDTrack</title>
    <link rel="stylesheet" href="EditPage.css">
    <script src="https://kit.fontawesome.com/5dfb2defde.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <h1 class="logo">MEDTrack</h1>
                <button class="back-btn" onclick="goBack()"><b><i class="fa-solid fa-arrow-left"></i> Back to Dashboard</b></button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="edit-card">
                <div class="card-header">
                    <div class="icon-wrapper">
                        <span class="pill-icon">ðŸ’Š</span>
                    </div>
                    <h2 class="card-title">Edit Medication</h2>
                    <p class="card-subtitle">Update your medication details</p>
                </div>

                <form class="edit-form" onsubmit="handleSubmit(event)">
                    <!-- Pill Name -->
                    <div class="form-group">
                        <label for="pillName" class="form-label">
                            Pill Name
                            <span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="pillName" 
                            class="form-input" 
                            placeholder="e.g., Aspirin"
                            value="Aspirin"
                            required
                        />
                    </div>

                    <!-- Dosage -->
                    <div class="form-group">
                        <label for="dosage" class="form-label">
                            Dosage
                            <span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="dosage" 
                            class="form-input" 
                            placeholder="e.g., 20ml or 500mg"
                            value="20ml"
                            required
                        />
                    </div>

                    <!-- Frequency -->
                    <div class="form-group">
                        <label for="frequency" class="form-label">
                            Frequency (per day)
                            <span class="required">*</span>
                        </label>
                        <input 
                            type="number" 
                            id="frequency" 
                            class="form-input" 
                            placeholder="e.g., 2"
                            value="2"
                            min="1"
                            max="10"
                            required
                        />
                    </div>

                    <!-- Medication Duration -->
                    <div class="form-group">
                        <label class="form-label">
                            Medication Duration
                            <span class="required">*</span>
                        </label>
                        <div class="days-selector">
                            <label class="day-checkbox">
                                <input type="checkbox" name="days" value="Monday" checked />
                                <span class="day-label">Mon</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" name="days" value="Tuesday" checked />
                                <span class="day-label">Tue</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" name="days" value="Wednesday" checked />
                                <span class="day-label">Wed</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" name="days" value="Thursday" checked />
                                <span class="day-label">Thu</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" name="days" value="Friday" />
                                <span class="day-label">Fri</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" name="days" value="Saturday" />
                                <span class="day-label">Sat</span>
                            </label>
                            <label class="day-checkbox">
                                <input type="checkbox" name="days" value="Sunday" />
                                <span class="day-label">Sun</span>
                            </label>
                        </div>
                    </div>

                    <!-- Time -->
                    <div class="form-group">
                        <label for="time" class="form-label">
                            Time
                            <span class="required">*</span>
                        </label>
                        <select id="time" class="form-select" required>
                            <option value="">Select time</option>
                            <option value="Before Meal">Before Meal</option>
                            <option value="After Meal" selected>After Meal</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <!-- Buttons -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-cancel" onclick="goBack()">Cancel</button>
                        <button type="submit" class="btn btn-confirm">Confirm Changes</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Floating Chat Button -->
        <button class="chat-fab" onclick="toggleChat()">ðŸ’¬</button>

        <!-- Chat Box -->
        <div class="chat-box" id="chatBox">
            <div class="chat-header">
                <h3>Chat Assistant</h3>
                <button class="chat-close" onclick="toggleChat()">âœ•</button>
            </div>
            <div class="chat-body">
                <div class="chat-message bot">
                    <div class="message-content">Hello! How can I help you with your medication today?</div>
                </div>
            </div>
            <div class="chat-footer">
                <input type="text" placeholder="Type a message..." class="chat-input" id="chatInput" onkeypress="handleChatKeypress(event)" />
                <button class="chat-send" onclick="sendMessage()">ðŸ“¤</button>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal-overlay" id="confirmModal">
            <div class="modal">
                <div class="modal-icon">âœ“</div>
                <h3 class="modal-title">Confirm Changes?</h3>
                <p class="modal-text">Are you sure you want to save these changes to your medication?</p>
                <div class="modal-actions">
                    <button class="btn btn-cancel" onclick="closeModal()">Cancel</button>
                    <button class="btn btn-confirm" onclick="confirmChanges()">Yes, Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Success Modal -->
        <div class="modal-overlay" id="successModal">
            <div class="modal">
                <div class="modal-icon success">âœ“</div>
                <h3 class="modal-title">Success!</h3>
                <p class="modal-text">Your medication has been updated successfully.</p>
                <div class="modal-actions">
                    <button class="btn btn-confirm" onclick="closeSuccessModal()">Done</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        function goBack() {
            window.history.back();
        }

        function handleSubmit(event) {
            event.preventDefault();
            document.getElementById('confirmModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('confirmModal').classList.remove('show');
        }

        function confirmChanges() {
            closeModal();
            // Simulate saving
            setTimeout(() => {
                document.getElementById('successModal').classList.add('show');
            }, 300);
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('show');
            // Optionally redirect back to dashboard
            // window.history.back();
        }

        function toggleChat() {
            const chatBox = document.getElementById('chatBox');
            chatBox.classList.toggle('show');
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message) {
                const chatBody = document.querySelector('.chat-body');
                
                // Add user message
                const userMsg = document.createElement('div');
                userMsg.className = 'chat-message user';
                userMsg.innerHTML = `<div class="message-content">${message}</div>`;
                chatBody.appendChild(userMsg);
                
                input.value = '';
                chatBody.scrollTop = chatBody.scrollHeight;
                
                // Simulate bot response
                setTimeout(() => {
                    const botMsg = document.createElement('div');
                    botMsg.className = 'chat-message bot';
                    botMsg.innerHTML = `<div class="message-content">I'm here to help! This feature will be connected to an API soon.</div>`;
                    chatBody.appendChild(botMsg);
                    chatBody.scrollTop = chatBody.scrollHeight;
                }, 1000);
            }
        }

        function handleChatKeypress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }
    </script>
</body>
</html>